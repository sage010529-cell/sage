<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAGE'S PIXEL LAB</title>
    <link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap" rel="stylesheet">
    <style>
        :root {
            --pixel-bg: #2d3436;
            --pixel-white: #f5f6fa;
            --pixel-red: #ff4757;
            --pixel-gold: #eab543;
            --pixel-blue: #1b9cfc;
        }

        body {
            background-color: var(--pixel-bg);
            color: var(--pixel-white);
            font-family: 'ZCOOL KuaiLe', cursive;
            image-rendering: pixelated; /* å…³é”®ï¼šä¿æŒå›¾åƒä¸æ¨¡ç³Š */
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* åƒç´ è¾¹æ¡†æ•ˆæœ */
        .pixel-border {
            border: 4px solid #000;
            box-shadow: 
                0 -4px 0 -2px #000, 0 4px 0 -2px #000,
                -4px 0 0 -2px #000, 4px 0 0 -2px #000;
            background: var(--pixel-white);
            color: #000;
            padding: 20px;
            margin: 20px;
        }

        /* æ¸¸æˆåŒºåŸŸå¸ƒå±€ */
        #game-world {
            position: relative;
            width: 400px;
            height: 400px;
            background: #57606f;
            border: 8px solid #000;
            margin: 20px auto;
        }

        /* åœ†å½¢æ¡Œå­ */
        #table {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200px;
            height: 200px;
            background: #a4b0be;
            border: 6px solid #2f3542;
            border-radius: 50%;
        }

        /* åƒç´ çº¢åŒ… */
        #red-packet {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 65px;
            background: var(--pixel-red);
            border: 4px solid #000;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 30px;
            z-index: 100;
        }

        #red-packet.active {
            background: var(--pixel-gold);
            animation: shake 0.1s infinite;
        }

        @keyframes shake {
            0% { transform: translate(-52%, -52%); }
            100% { transform: translate(-48%, -48%); }
        }

        /* åƒç´ å°äººæ ·å¼ */
        .sprite {
            position: absolute;
            width: 40px;
            height: 40px;
            border: 3px solid #000;
            background: #747d8c;
            text-align: center;
            line-height: 40px;
            font-size: 20px;
        }

        .player-sprite { background: var(--pixel-blue); color: white; border-color: #fff; }

        .btn {
            background: var(--pixel-gold);
            border: 4px solid #000;
            padding: 10px 20px;
            font-family: inherit;
            cursor: pointer;
            font-size: 20px;
        }

        .btn:active { transform: scale(0.95); }

    </style>
</head>
<body>

    <div class="pixel-border">
        <h1>SAGE PIXEL LAB: ä¸ç¡®å®šæ€§åšå¼ˆ</h1>
        <p>å½“çº¢åŒ…å˜é‡‘è‰²çš„ç¬é—´ç‚¹å‡»ï¼æ¯” AI æ›´å¿«æŠ¢åˆ°å®ƒï¼</p>
    </div>

    <div id="game-world">
        <div id="table"></div>
        <div id="red-packet" onclick="playerGrab()">ğŸ§§</div>
        </div>

    <div class="pixel-border" style="width: 360px; text-align: center;">
        <button class="btn" onclick="startRound()">[ å¼€å§‹åšå¼ˆ ]</button>
        <h2 id="msg">å‡†å¤‡å¥½äº†å—ï¼Ÿ</h2>
    </div>

    <script>
        const world = document.getElementById('game-world');
        const packet = document.getElementById('red-packet');
        const msg = document.getElementById('msg');
        let gameRunning = false;
        let canGrab = false;

        // ç”Ÿæˆ 8 ä¸ªåƒç´ å°äºº
        for (let i = 0; i < 8; i++) {
            const angle = (i * 45) * (Math.PI / 180);
            const x = 200 + 140 * Math.cos(angle) - 20;
            const y = 200 + 140 * Math.sin(angle) - 20;
            const sprite = document.createElement('div');
            sprite.className = i === 0 ? 'sprite player-sprite' : 'sprite';
            sprite.style.left = x + 'px';
            sprite.style.top = y + 'px';
            sprite.innerText = i === 0 ? "æˆ‘" : "AI";
            world.appendChild(sprite);
        }

        function startRound() {
            if (gameRunning) return;
            gameRunning = true;
            canGrab = false;
            packet.classList.remove('active');
            msg.innerText = "ç›¯ç€çº¢åŒ…...";

            const wait = 1500 + Math.random() * 3000;
            setTimeout(() => {
                packet.classList.add('active');
                canGrab = true;
                
                // AI ååº”é€Ÿåº¦éšæœº (200ms - 600ms)
                const aiReaction = 200 + Math.random() * 400;
                setTimeout(() => {
                    if (canGrab) {
                        endGame("å“å‘€ï¼è¢« AI æŠ¢å…ˆäº†ï¼");
                    }
                }, aiReaction);
            }, wait);
        }

        function playerGrab() {
            if (!canGrab) {
                if(gameRunning) endGame("æŠ¢æ—©äº†ï¼å¤±å»èµ„æ ¼ï¼");
                return;
            }
            endGame("WINNER! ä½ æ˜¯è¿™æ¡Œæœ€å¿«çš„é¸Ÿï¼");
        }

        function endGame(text) {
            canGrab = false;
            gameRunning = false;
            packet.classList.remove('active');
            msg.innerText = text;
        }
    </script>
</body>
</html>
